<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coral Reefs — Food, Shields, and Shorelines / Seed (Site‑Styled)</title>
  <!-- Uses your white site styling with cards, no collapse -->
  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui, sans-serif; margin: 2rem; max-width: 1000px; }
    h1 { font-size: 1.6rem; margin-bottom: .5rem; }
    form { display: flex; gap: .5rem; flex-wrap: wrap; margin: 1rem 0; }
    input[type="text"] { padding: .6rem .7rem; min-width: 22rem; border: 1px solid #ccc; border-radius: .5rem; }
    button { padding: .6rem .9rem; border: 0; border-radius: .5rem; cursor: pointer; background: #0b5cff; color: #fff; }
    .meta { font-size: .9rem; opacity: .85; margin: .25rem 0 1rem; }
    .grid { display: grid; gap: .8rem; }
    .cols-2 { grid-template-columns: 1fr 1fr; }
    .cols-3 { grid-template-columns: 1fr 1fr 1fr; }
    .cols-4 { grid-template-columns: 1fr 1fr 1fr 1fr; }
    @media (max-width: 900px){ .cols-2, .cols-3, .cols-4 { grid-template-columns: 1fr; } }
    .seedbox { border-top: 1px dashed #c8c8c8; margin-top: .5rem; padding-top: .5rem; }
    .seed-title { font-weight: 600; margin-bottom: .25rem; }
    .muted { opacity: .7; font-size: .95rem; }
    pre { background: #f6f6f6; padding: .75rem; border-radius: .5rem; overflow-x: auto; }
    .badge { display:inline-block; padding:.15rem .45rem; border:1px solid #d0d0d0; border-radius:.4rem; background:#fff; font-size:.8rem; }
    .placeholder { height: 120px; border: 1px dashed #c8c8c8; border-radius: .5rem; display: grid; place-items: center; color: #666; background: #fff; }
    .chip { display:inline-block; padding:.2rem .45rem; border:1px solid #d0d0d0; border-radius:.5rem; background:#fff; font-size:.85rem; margin:.15rem .25rem .15rem 0; }

    /* Card styling */
    .card { border: 1px solid #d0d0d0; border-radius: .6rem; padding: .9rem 1rem; background: #fff; }
    .card h3 { margin: .2rem 0 .5rem; font-size: 1rem; }

    /* Simple meters */
    .meter { height: 12px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 999px; overflow: hidden; }
    .fill { height: 100%; width: 0%; background: linear-gradient(90deg,#0b5cff,#16a34a); transition: width .6s ease; }
    .tickline { position: relative; height: 0; }
    .tickline::before { content: ""; position: absolute; top: -8px; width: 2px; height: 28px; background: #b0b0b0; }

    /* Tables */
    table { width: 100%; border-collapse: collapse; }
    th, td { border-bottom: 1px solid #e6e6e6; padding: .45rem .4rem; text-align: left; font-size: .95rem; }
    th { background: #fafafa; }

    /* Map panel mock */
    .map { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:.6rem; }
    .seg { border:1px solid #d0d0d0; border-radius:.5rem; padding:.5rem; background:#fff; }
    .seg .swatch { display:inline-block; width:.8rem; height:.8rem; border-radius:.2rem; margin-right:.4rem; vertical-align: middle; }
    .amber { background:#f59e0b; }
    .red { background:#ef4444; }
    .green { background:#22c55e; }

    /* Controls row */
    .controls { display:flex; flex-wrap: wrap; gap:.5rem; }
    .secondary { background:#e9ecff; color:#0b5cff; border:1px solid #cbd5ff; }
    .mutebtn { background:#f0f0f0; color:#333; }

    /* Print summary */
    @media print { 
      .noprint { display:none; }
      body { max-width: 100%; margin: 0.5in; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Coral Reefs / Food, Shields, and Shorelines / Seed</h1>
    <div class="meta">A (Problem): Cyclones flatten reefs and wreck coastal livelihoods; funds prioritize concrete over living. <br> B (Objective): Fast, coupled ecological + community recovery that restores reef function and income. <br> Link: Post‑cyclone playbook (triage → stabilize → outplant) tied to cash‑for‑reefwork, micro‑insurance top‑ups, and reef‑repair credits.</div>
    <p class="muted"><strong>Core intent:</strong> Time‑boxed reef repair linked to immediate household cash and credit makes living reefs the obvious, fastest path to coastal recovery for communities, funders, and insurers.</p>
  </header>

  <!-- STORYBOARD (6 frames) -->
  <section class="grid cols-2">
    <div class="card">
      <h3>1) Shock</h3>
      <p class="muted">Cyclone icon sweeps a coastal map; segments A/B/C show damage; Day 0 assets down, waves higher.</p>
      <div class="placeholder">[image placeholder — cyclone map, segments A red, B amber, C green]</div>
    </div>
    <div class="card">
      <h3>2) Playbook switch‑on</h3>
      <p class="muted"><em>Reef Reset 30‑90‑180</em> laminated card — Day 1–7 triage & reattachment; Day 8–30 rubble stabilization; Day 31–90 nursery outplanting. Each step unlocks money.</p>
      <div class="placeholder">[image placeholder — laminated playbook card]</div>
    </div>
    <div class="card">
      <h3>3) Rosters & cash‑for‑reefwork</h3>
      <p class="muted">Clipboard: 60 local workers across segments A/B/C. Each shift pays day wages + 1 reef‑repair credit. Payday Fridays. “We start tomorrow.”</p>
      <div class="placeholder">[image placeholder — roster & wage note]</div>
    </div>
    <div class="card">
      <h3>4) Work in place</h3>
      <p class="muted">Before/after: rubble → stabilized modules; scattered coral → reattached clusters. Icons tally: 8,000 fragments triaged; 2,500 m² stabilized; 12 nurseries stocked.</p>
      <div class="placeholder">[image placeholder — split before/after]</div>
    </div>
    <div class="card">
      <h3>5) KPI triggers unlock finance</h3>
      <p class="muted">Meters hit thresholds: 70% rubble stabilized (day 30) → insurance top‑ups; 60% survival (day 60) → municipal micro‑grant; wave attenuation → 30% by day 90 → donor tranche. “Funds released.”</p>
      <div class="placeholder">[image placeholder — KPI meter & banner]</div>
    </div>
    <div class="card">
      <h3>6) Community bounce</h3>
      <p class="muted">Market stalls re‑open; builders/hardware stamp “Redeemed”; fishers back at sea; shoreline shield score improves; money flows because function returns.</p>
      <div class="placeholder">[image placeholder — market, vendors, boats]</div>
    </div>
  </section>

  <!-- MOCK DASHBOARD (prefilled, click‑through only) -->
  <section class="card">
    <h2>Mock Dashboard (static numbers; pre‑scripted demo)</h2>
    <div class="controls noprint" style="margin:.4rem 0 1rem">
      <button id="step0" class="mutebtn">Step 1 — Cyclone hits</button>
      <button id="step1" class="secondary">Step 2 — Activate playbook</button>
      <button id="step2" class="secondary">Step 3 — Simulate days 1–7</button>
      <button id="step3" class="secondary">Step 4 — Simulate to day 30</button>
      <button id="step4" class="secondary">Step 5 — Simulate to day 90</button>
      <button id="printBtn" class="mutebtn">Step 6 — Print Summary</button>
    </div>

    <div class="grid cols-2">
      <!-- Panel A: Map & segments -->
      <div class="card">
        <h3>Panel A — Map & Segments</h3>
        <div id="mapState" class="muted">State: Pre‑event</div>
        <div class="map" style="margin-top:.5rem">
          <div class="seg" id="segA"><span class="swatch amber"></span><strong>Segment A</strong><br><small id="segATxt">Damage: low • Target: 60% by D30</small></div>
          <div class="seg" id="segB"><span class="swatch red"></span><strong>Segment B</strong><br><small id="segBTxt">Damage: high • Needs 1,200 m² stabilization</small></div>
          <div class="seg" id="segC"><span class="swatch green"></span><strong>Segment C</strong><br><small id="segCTxt">Damage: mild • Monitoring</small></div>
        </div>
      </div>

      <!-- Panel B: Task Queue -->
      <div class="card">
        <h3>Panel B — Task Queue</h3>
        <div id="tasks">
          <div class="card" style="margin-bottom:.5rem">
            <strong>Triage</strong> — crews: <span id="triageCrew">20</span> • tools: crates, zip‑ties • today: <span id="triageToday">collect 1,200 fragments</span>
            <div class="meter" style="margin-top:.4rem"><div id="triageFill" class="fill" style="width:0%"></div></div>
          </div>
          <div class="card" style="margin-bottom:.5rem">
            <strong>Stabilize</strong> — crews: <span id="stabCrew">24</span> • tools: modules, sand screws • today: <span id="stabToday">stage 400 m²</span>
            <div class="meter" style="margin-top:.4rem"><div id="stabFill" class="fill" style="width:0%"></div></div>
            <div class="tickline" style="left:70%"></div>
          </div>
          <div class="card">
            <strong>Outplant</strong> — crews: <span id="outCrew">16</span> • tools: nursery frames • today: <span id="outToday">prep 4 frames</span>
            <div class="meter" style="margin-top:.4rem"><div id="outFill" class="fill" style="width:0%"></div></div>
          </div>
        </div>
      </div>

      <!-- Panel C: Community Wallets -->
      <div class="card">
        <h3>Panel C — Community Wallets</h3>
        <table>
          <thead><tr><th>Household</th><th>Cash‑for‑reefwork</th><th>Insurance top‑up</th><th>Credits</th></tr></thead>
          <tbody id="walletRows"></tbody>
        </table>
        <p class="muted" id="walletNote" style="margin-top:.4rem">KPI toggle: when Stabilize ≥ 70% by D30 → Insurance top‑ups unlock.</p>
      </div>

      <!-- Panel D: Credit Ledger -->
      <div class="card">
        <h3>Panel D — Credit Ledger</h3>
        <div class="grid cols-2">
          <div>
            <p><strong>Issued:</strong> <span id="credIssued">0</span></p>
            <p><strong>Redeemed:</strong> <span id="credRedeemed">0</span></p>
            <p class="muted">Credits expire in 120 days; backed by donor pool.</p>
          </div>
          <div>
            <table>
              <thead><tr><th>Vendor</th><th>Redeemed</th></tr></thead>
              <tbody id="vendorRows">
                <tr><td>Builder coop</td><td>0</td></tr>
                <tr><td>Hardware</td><td>0</td></tr>
                <tr><td>Boat repair</td><td>0</td></tr>
                <tr><td>Seed store</td><td>0</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Panel E: KPIs & Triggers -->
      <div class="card">
        <h3>Panel E — KPIs & Triggers</h3>
        <p>Rubble stabilized (0–70%) unlocks 20% micro‑insurance top‑up</p>
        <div class="meter"><div id="kpiRubble" class="fill" style="width:0%"></div></div>
        <p style="margin-top:.6rem">Coral survival (50–60%) unlocks 10% municipal rebuild voucher</p>
        <div class="meter"><div id="kpiSurvival" class="fill" style="width:0%"></div></div>
        <p style="margin-top:.6rem">Wave energy reduction (25–35%) unlocks donor tranche for nurseries</p>
        <div class="meter"><div id="kpiWave" class="fill" style="width:0%"></div></div>
      </div>
    </div>
  </section>

  <!-- First Eyes -->
  <section class="card">
    <h2>First Eyes</h2>
    <div class="grid cols-2">
      <ul>
        <li>Local reef cooperatives and fishers</li>
        <li>Women’s savings groups and community treasurers</li>
        <li>Municipal disaster response and public works leads</li>
        <li>NGO reef restoration practitioners in‑region</li>
      </ul>
      <ul>
        <li>Micro‑insurance & parametric insurance reps</li>
        <li>Local builders & hardware store owners</li>
        <li>Small business association & market leaders</li>
        <li>Donor program officers (climate & livelihoods)</li>
      </ul>
    </div>
  </section>

  <!-- Why Box of Dirt -->
  <section class="card">
    <h2>Why this is a Box of Dirt</h2>
    <p class="muted">It’s only a fixed storyboard and a mocked, prefilled dashboard — not a real app, contracts, or monitoring. The single purpose is to see if coupling reef work and money release reads as obvious and trustworthy. Disposable and growth‑inviting: each mock maps cleanly to future plug‑ins (real assessment data, parametric triggers, mobile disbursement rails, marketplace).</p>
  </section>

  <!-- Summary (prints on Step 6) -->
  <section id="summary" class="card" style="display:none">
    <h2>One‑Page Summary</h2>
    <div class="grid cols-2">
      <div>
        <h3>What was done</h3>
        <ul id="sumDone">
          <li>Triage completed (Days 1–7): 8,000 fragments</li>
          <li>Stabilization (Day 30): 72% rubble stabilized (1,800 m²)</li>
          <li>Outplanting (Day 90): nurseries stocked; survival ≥ 60%</li>
        </ul>
        <h3>Who got paid</h3>
        <ul id="sumPaid">
          <li>Cash‑for‑reefwork wages disbursed to 60 workers</li>
          <li>Insurance top‑ups unlocked for 10 households</li>
        </ul>
      </div>
      <div>
        <h3>What unlocked</h3>
        <ul id="sumUnlock">
          <li>Reef‑repair credits: 500 issued, 320 redeemed</li>
          <li>Vendors: builder coop, hardware, boat repair, seed store</li>
        </ul>
        <h3>Projected benefits</h3>
        <ul>
          <li>Wave attenuation: 40 → 65</li>
          <li>Fishing days restored: +18/month</li>
        </ul>
      </div>
    </div>
  </section>

  <script>
    // Mock data and state machine for pre‑scripted demo path
    const wallets = ["HH‑01","HH‑02","HH‑03","HH‑04","HH‑05","HH‑06","HH‑07","HH‑08","HH‑09","HH‑10"];
    const walletRows = document.getElementById('walletRows');
    function renderWallets(cash=0, topup='pending', credits=0){
      walletRows.innerHTML = '';
      wallets.forEach((h,i)=>{
        const tr=document.createElement('tr');
        const cashStr = cash>0 ? `$${(cash + (i%3)*5)}` : '$0';
        const topStr = Array.isArray(topup) ? topup[i] : (topup==='unlocked' && i<10 ? 'unlocked' : 'pending');
        const credStr = credits>0 ? String(credits) : '0';
        tr.innerHTML = `<td>${h}</td><td>${cashStr}</td><td><span class="badge">${topStr}</span></td><td>${credStr}</td>`;
        walletRows.appendChild(tr);
      });
    }
    renderWallets();

    const mapState = document.getElementById('mapState');
    const segATxt = document.getElementById('segATxt');
    const segBTxt = document.getElementById('segBTxt');
    const segCTxt = document.getElementById('segCTxt');

    const triageFill = document.getElementById('triageFill');
    const stabFill = document.getElementById('stabFill');
    const outFill = document.getElementById('outFill');

    const triageCrew = document.getElementById('triageCrew');
    const stabCrew = document.getElementById('stabCrew');
    const outCrew = document.getElementById('outCrew');

    const triageToday = document.getElementById('triageToday');
    const stabToday = document.getElementById('stabToday');
    const outToday = document.getElementById('outToday');

    const credIssued = document.getElementById('credIssued');
    const credRedeemed = document.getElementById('credRedeemed');
    const vendorRows = document.getElementById('vendorRows');

    const kpiRubble = document.getElementById('kpiRubble');
    const kpiSurvival = document.getElementById('kpiSurvival');
    const kpiWave = document.getElementById('kpiWave');

    const summary = document.getElementById('summary');

    // Buttons
    document.getElementById('step0').addEventListener('click', () => {
      mapState.textContent = 'State: Cyclone impact — assets down; wallets 0 unlocked';
      segATxt.textContent = 'Damage: moderate • Target 60% by D30';
      segBTxt.textContent = 'Damage: high • Needs 1,200 m² stabilization';
      segCTxt.textContent = 'Damage: mild • Monitoring';
      renderWallets(0,'pending',0);
      triageFill.style.width = '0%';
      stabFill.style.width = '0%';
      outFill.style.width = '0%';
      kpiRubble.style.width = '0%';
      kpiSurvival.style.width = '0%';
      kpiWave.style.width = '0%';
      credIssued.textContent = '0';
      credRedeemed.textContent = '0';
      vendorRows.querySelectorAll('tr').forEach((tr)=>tr.children[1].textContent = '0');
      summary.style.display = 'none';
    });

    document.getElementById('step1').addEventListener('click', () => {
      mapState.textContent = 'State: Playbook activated — priority zones overlayed';
      triageCrew.textContent = '20';
      stabCrew.textContent = '24';
      outCrew.textContent = '16';
      triageToday.textContent = 'collect 1,200 fragments';
      stabToday.textContent = 'stage 400 m²';
      outToday.textContent = 'prep 4 frames';
    });

    document.getElementById('step2').addEventListener('click', () => {
      triageFill.style.width = '100%';
      stabFill.style.width = '28%';
      outFill.style.width = '12%';
      kpiRubble.style.width = '28%';
      kpiSurvival.style.width = '0%';
      kpiWave.style.width = '10%';
      renderWallets(24,'pending',12); // wages out; credits begin
      credIssued.textContent = '120';
      vendorRows.querySelector('tr:nth-child(1) td:nth-child(2)').textContent = '0';
    });

    document.getElementById('step3').addEventListener('click', () => {
      triageFill.style.width = '100%';
      stabFill.style.width = '72%';
      outFill.style.width = '24%';
      kpiRubble.style.width = '72%';
      kpiSurvival.style.width = '20%';
      kpiWave.style.width = '22%';
      // unlock insurance top‑ups for 10 households
      const topArr = Array(10).fill('unlocked');
      renderWallets(48, topArr, 60);
      credIssued.textContent = '280';
      vendorRows.querySelector('tr:nth-child(2) td:nth-child(2)').textContent = '40';
      document.getElementById('walletNote').textContent = 'Insurance top‑ups unlocked (Stabilize ≥ 70% by D30 met).';
    });

    document.getElementById('step4').addEventListener('click', () => {
      triageFill.style.width = '100%';
      stabFill.style.width = '85%';
      outFill.style.width = '100%';
      kpiRubble.style.width = '85%';
      kpiSurvival.style.width = '60%';
      kpiWave.style.width = '35%';
      renderWallets(60, 'unlocked', 120);
      credIssued.textContent = '500';
      credRedeemed.textContent = '320';
      // Vendors ledger
      const vals = [120, 110, 60, 30];
      vendorRows.querySelectorAll('tr').forEach((tr,i)=> tr.children[1].textContent = String(vals[i]));
      mapState.textContent = 'State: Recovery progressing — Segment B flips amber; shoreline shield 40 → 65';
    });

    document.getElementById('printBtn').addEventListener('click', () => {
      summary.style.display = '';
      window.print();
    });
  </script>
</body>
</html>